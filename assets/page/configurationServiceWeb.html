<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <title>Machine Virtuelle</title>
  <link
 href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
 rel="stylesheet"
 integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
 crossorigin="anonymous">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <!-- Logo à gauche -->
      <a class="navbar-brand" href="../../index.html">
        <img src="../image/virtualbox_logo.png" alt="Logo"> <!-- Remplacez ce lien par l'URL de votre logo -->
      </a>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <!-- Lien simple vers Introduction -->
          <li class="nav-item">
            <a class="nav-link" href="../../index.html">
              Introduction au travail
            </a>
          </li>
          <!-- Lien simple vers Création MV -->
          <li class="nav-item">
            <a class="nav-link" href="creationMV.html">
              Création MV
            </a>
          </li>
          <!-- Menu déroulant Utilisation MV -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownUtilisation" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Utilisation MV
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdownUtilisation">
              <li><a class="dropdown-item" href="creationAdmin.html">Création administrateur</a></li>
              <li><a class="dropdown-item" href="creationUtilisateurs.html">Création d'utilisateurs</a></li>
              <li><a class="dropdown-item" href="creationGroupe.html">Création groupe</a></li>
              <li><a class="dropdown-item" href="personnalisationPrompt.html">Personnalisation Prompt</a></li>
            </ul>
          </li>
          <!-- Menu déroulant vers Configuration et déploiement -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownDeploiement" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Configuration et Déploiement 
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdownDeploiement">
              <li><a class="dropdown-item" href="configurationServiceWeb.html">Configuration Service Web</a></li>
              <li><a class="dropdown-item" href="WebStormPourDéploiement.html">WebStorm Pour le Déploiement</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  
  <div class="installation_mv">
    <h1>Installation et configuration d’un service web (Apache) : </h1>
    <p><br>Nous prenons connaissance de l’adresse ip de la machine : 192.168.1 correspond à l’adresse du réseau tandis que 108 correspond à l’adresse de la machine virtuelle.</p>
    <br><img src="../image/1.png" alt="configVirtualBox" class="img-fluid"> <!-- Image responsive -->">
    <p>
      <br>Installer un serveur ssh si ce n’est pas déjà fait, “sudo apt install openssh-serve:” permet d’installer le service de ssh. Et entrer “O” ensuite pour continuer.
    </p>
    <br><img src="../image/2.png" alt="configVirtualBox" class="img-fluid"> <!-- Image responsive -->">
    <p>
      <br>(optionnel -> facilite les manips)
    </p>
    <br><img src="../image/3.png" alt="configVirtualBox" class="img-fluid"> <!-- Image responsive -->">
    <p>
      <br>On installe apache puis on entre “O” pour oui. Une fois l’installation terminée, le service web sera démarré dès la fin de l’installation.
    </p>
    <br><img src="../image/4.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Vous pourrez ensuite vérifier le bon fonctionnement de votre service web en tapant l’adresse ip de votre machine dans un navigateur.
    </p>
    <br><img src="../image/5.png" alt="configVirtualBox" class="img-fluid">

    <p>
      <br>On peut ainsi voir l’emplacement du fichier html. Sur le site, il est indiqué que le fichier est contenu dans le dossier var/www par défaut, il s’agit donc d’un fichier public.
D’après la commande ls, le fichier est bien dans le dossier var.

    </p>
    <br><img src="../image/6.png" alt="configVirtualBox" class="img-fluid">

    <p>
      <br>On peut taper la commande “more /var/www/html/index.html” pour voir le contenu du fichier index.html.
    </p>
    <br><img src="../image/7.png" alt="configVirtualBox" class="img-fluid">

    <p>
      <br>Avec ls -l, on constate que l’on n’a pas les droits d’écriture et de modifications sur le fichier index.html, on souhaite régler ce problème.
    </p>
    <br><img src="../image/8.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On crée un dossier monsite.fr dont l’on peut constater la création via la commande ll. (Ici, nous pouvons voir qu’elle affiche une erreur au niveau de la création du répertoire. Cela se produit car nous avons déjà créé au préalable le répertoire mais sinon le répertoire est censé se créer sans problème.)
    </p>
    <br><img src="../image/9.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On se place dans le répertoire courant (monsite.fr).
      Puis on crée un fichier test.html dans lequel on écrit “Hello world ! “. 
      Cette manipulation permet de savoir si nous avons bien les droits d’écriture.
    </p>
    <br><img src="../image/10.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Le but va être d’avoir un affichage fonctionnel sur la page test.html (qui n’est pas le cas pour l’instant).
    </p>
    <br><img src="../image/11.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On peut voir que l’on retrouve le fichier 000-default.conf dans un lien en tapant la commande ls -l. 
      On modifie le fichier 000-default.conf avec sudo vi : 
    </p>
    <br><img src="../image/12.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Il faut entrer le mot de passe pour y accéder.
    </p>
    <br><img src="../image/13.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Sur la ligne DocumentRoot, remplacer var/www/html par /home/nom_utilisateur/monsite.fr .
          Puis faites echap/esc, cela vous ramènera en mode commande puis entrer la commande “:wq” pour enregistrer les modifications et quitter le mode insertion.
    </p>
    <br><img src="../image/14.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Après avoir modifié le DocumentRoot, il faut l’actualiser avec la commande sudo systemctl reload apache2.service.
 
    </p>
    <br><img src="../image/15.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Vous devriez ainsi avoir le texte ci-dessus sur le site.
    </p>
    <br><img src="../image/16.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On se place ensuite dans le dossier site-enabled en tant que répertoire courant 
      puis avec sudo ls on peut aller voir les fichiers d’apache2 (error.log qui nous intéresse plus particulièrement).

    </p>
    <br><img src="../image/17.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On peut consulter le fichier error.log avec la commande ci-dessus pour constater que l’on a des problèmes de permissions sur le fichier.

    </p>
    <br><img src="../image/18.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Il faut aller voir la configuration d’apache, et dans le dossier apache, 
      on affiche le fichier apache2.conf qu’ il va falloir consulter en tapant la commande sudo vi apache2.conf.
    </p>
    <br><img src="../image/19.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Et, ce fichier contient l’ensemble des directives qui permet à apache de travailler.
    </p>
    <br><img src="../image/20.png" alt="configVirtualBox" class="img-fluid">
    <p>
      Il y a une directive sur le répertoire soit “Directory” en anglais. Cette directive nous indique que dans le fichier : 
      / (Fichier racine) : Nous avons aucun accès (“Require all denied)
      /var/www/ : Nous avons accès (“Require all granted”), PS: Ce qui nous permettait d’avoir la page par défaut
    </p>
    <br><img src="../image/21.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Nous voulons avoir accès à /home/admin_Gr10_Binome01/monsite.fr/, alors, il faut copier la 
      directive /var/www/ puisque l’on a l’accès puis on modifie /var/www/ par admin_Gr10_Binome01 
      (pour notre cas) et on laisse les options par défaut. Puis, on enregistre.
      (Une fois modifier, appuyer sur echap et vous enregistrer et quitter en tapant “:wq”).
    </p>
    <br><img src="../image/22.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On redémarre le système. On regarde si le site fonctionne: 
    </p>
    <br><img src="../image/23.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Dans notre cas, on a cet affichage, ce qui veut dire que le problème n’est pas totalement réglé.
    </p>
    <br><img src="../image/24.png" alt="configVirtualBox" class="img-fluid">
    <p>
      Comme, précédemment, il y'a écrit que dans le répertoire principal, nous n’avons pas les permissions, 
      alors il faut faire en sorte de regarder les permissions qui sont sur le répertoire principal. 
      Alors pour revenir dans le répertoire principale, on tape cd. 
    </p>
    <br><img src="../image/25.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On tape la commande ls -l, pour voir l’ensemble des permissions. 
      On peut voir que les autres ont bien accès à la lecture et à l'exécution du fichier. 
    </p>
    <br><img src="../image/26.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Sachant que nous avons l’ensemble des droits dans le fichier, le problème 
      ne vient donc pas de cet endroit mais certainement du répertoire parent. 
      Alors, pour aller vers le répertoire parent, soit le dossier home, on tape la commande cd .. .
      On tape la commande ls -l, pour voir les permissions : 
    </p>
    <br><img src="../image/27.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On peut voir que je n’ai pas d’accès. Alors, il faut faire en sorte d’avoir 
      les permissions manquantes dans le compte administrateur pour que l'affichage fonctionne bien. 
    </p>
    <br><img src="../image/28.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Pour avoir des informations précises sur le dossier, on tape, tout d’abord, 
      la commande: ls -ld /home/afshar/ . Cette commande permet de montrer les permissions 
      en tant qu’utilisateur.

    </p>
    <br><img src="../image/29.png" alt="configVirtualBox" class="img-fluid">
    <p>
      Ensuite, on tape la commande : sudo ls -ld /home/afshar/ . Cette commande permet de montrer les permissions pour le root.  
    </p>
    <br><img src="../image/30.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Pour contourner certaines restrictions qui complexifie les tâches, 
      on passe en mode root avec la commande : sudo -i . 
      Ici, une fois en mode root, on tente de modifier les permissions et le propriétaire du dossier :
    </p>
    <br><img src="../image/31.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On change le propriétaire avec la commande : chown -R afshar:afshar /home/afshar .
    </p>
    <br><img src="../image/32.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On modifie les permissions avec la commande : chmod -R 777 /home/afshar . 
    </p>
    <br><img src="../image/33.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Puis, on tape exit pour quitter le root. 
    </p>
    <br><img src="../image/34.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On installe ACL en tapant la commande : sudo apt install acl . Les ACL (Access Control Lists) 
      peuvent restreindre l'accès, même si les permissions semblent correctes.
    </p>
    <br><img src="../image/35.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On vérifie ACL sur le répertoire en tapant la commande : getfacl /home/afshar . 
    </p>
    <br><img src="../image/36.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Si des ACL restrictives sont définies, on les réinitialise en tapant la commande : 
sudo setfacl -bR /home/afshar .
    </p>
    <br><img src="../image/37.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Certaines distributions Linux activent des politiques de sécurité avancées 
      qui pourraient bloquer l'accès. On vérifie d’abord si AppArmor est activé en tapant la commande : 
      sudo aa-status .
    </p>
    <br><img src="../image/38.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On peut voir qu’en exécutant cette commande, elle nous indique bien que AppArmor est activé. 
    </p>
    <br><img src="../image/39.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Afin de tester l’affichage, on désactive temporairement AppArmor en tapant la commande : sudo systemctl stop apparmor . 
    </p>
    <br><img src="../image/40.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Puis, on retape la commande  ls -ld /home/afshar pour voir à nouveau les droits après les modifications.
    </p>
    <br><img src="../image/41.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Après modification, on peut bien voir que l’utilisateur possède tous les droits pour l’affichage. 
    </p>
    <br><img src="../image/42.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Ainsi, voici l’affichage attendu après le changement. 
    </p>
    <br><img src="../image/43.png" alt="configVirtualBox" height="634" width="903">
    <p>
      <br>Dans le système Ubuntu, il y a un dossier par défaut nommé /srv dont le but est 
      de pouvoir stocker les différents services. Donc, on y accède en tapant la commande cd /srv .
    </p>
    <br><img src="../image/44.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Ici, on fait un lien entre le dossier /srv et monsite.fr en tapant la commande : 
      sudo ln -s /home/admin_Gr_10_Binome01/monsite.fr/ monsite.fr
    </p>
    <br><img src="../image/45.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On regarde le contenu du dossier /srv.  

    </p>
    <br><img src="../image/46.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>En tapant la commande ll, on peut voir l’ensemble des informations du contenu du dossier /srv. 
      Ici, on peut notamment voir un lien symbolique monsite.fr qui pointe vers /home/admin_Gr_10_Binome01/monsite.fr/. 
      Ce lien est le lien que nous avons créer précédemment. 

    </p>
    <br><img src="../image/47.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Ici, lorsque l’on tape la commande pwd, elle nous indique que nous sommes bien dans le répertoire /srv. 
      Nous on veut faire en sorte que monsite.fr s’affiche lors de la commande précedente.
      Alors, on va modifier la configuration : 
    </p>
    <br><img src="../image/48.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On tape la commande, sudo vi /etc/apache2/sites-enabled/000-default.conf .
    </p>
    <br><img src="../image/49.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On modifie /home/admin_Gr10_Binome01/monsite.fr par /srv/monsite.fr. 
    </p>
    <br><img src="../image/50.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>j;fgvbgjvb ngjjcgj;f;jyftufcut;ftu;fltuftyfvtyvfktyvfhvf,hjgt
    </p>
    <br><img src="../image/51.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Ici, on fait un lien entre le dossier /srv et monsite.fr en tapant la commande : 
      sudo ln -s /home/admin_Gr_10_Binome01/monsite.fr/ monsite.fr
    </p>
    <br><img src="../image/45.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>On regarde le contenu du dossier /srv.  

    </p>
    <br><img src="../image/46.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>En tapant la commande ll, on peut voir l’ensemble des informations du contenu du dossier /srv. 
      Ici, on peut notamment voir un lien symbolique monsite.fr qui pointe vers /home/admin_Gr_10_Binome01/monsite.fr/. 
      Ce lien est le lien que nous avons créer précédemment. 

    </p>
    <br><img src="../image/47.png" alt="configVirtualBox" class="img-fluid">
    <p>
      <br>Ici, lorsque l’on tape la commande pwd, elle nous indique que nous sommes bien dans le répertoire /srv. 
      Nous on veut faire en sorte que monsite.fr s’affiche lors de la commande précedente.
      Alors, on va modifier la configuration : 
    </p>
  </div>

    
      
    
  
      







    <!-- Pied de page -->
  <footer class="bg-dark text-light py-4 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <h1>Coordonnées</h1>
          <p>
            <a href="https://www.google.com/maps/search/?q=123+Rue+de+l'Entreprise,+75000+Paris,+France" target="_blank">123 Rue de l'Entreprise, 75000 Paris, France</a><br>
            Téléphone : 01 23 45 67 89<br>
            Email : <a href="mailto:info@entreprise.fr">info@entreprise.fr</a>
          </p>
        </div>
        <div class="col-md-4">
          <h1>À propos</h1>
          <p>
            Ce site est réalisé par les étudiants<br>de l'IUT de Paris Cité :<br>Afshar MOHAMED AJMALDEEN,<br>Johann TIXIER,<br>Dany LIM,<br>Sarah XU
          </p>
        </div>
        <div class="col-md-4">
          <h5>Suivez-nous</h5>
          <ul class="list-unstyled">
            <li><a href="https://www.facebook.com/entreprise" target="_blank"><img src="../image/facebook.png" height = "50" width = "50" alt = "logo facebook"></a></li>
            <li><a href="https://www.twitter.com/entreprise" target="_blank"><img src="../image/twitter.png" height = "50" width = "50" alt="logo X"></a></li>
            <li><a href="https://www.instagram.com/entreprise" target="_blank"><img src="../image/instagram.png" height = "50" width = "50" alt="logo Insta"></a></li>
            <li><a href="https://www.linkedin.com/company/entreprise" target="_blank"><img src="../image/linkedin.png" height = "50" width = "50" alt="logo linkdin"></a></li>
          </ul>
        </div>
      </div>
      <hr class="border-light">
      <div class="text-center">
        <p>&copy; 2025 Mon Site Web. Tous droits réservés.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts Bootstrap -->
  <script
   src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
   integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
   crossorigin="anonymous"></script>
</body>
</html>













  












